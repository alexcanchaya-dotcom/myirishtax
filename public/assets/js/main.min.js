import{buildExportSummary,calculateTaxResult,formatEuro}from './calculator.js';const faqItems = document.querySelectorAll('.faq-item');faqItems.forEach((item,index)=>{const question = item.querySelector('.faq-question');const answer = item.querySelector('.faq-answer');const toggle = item.querySelector('.faq-toggle');if(!question || !answer)return;const answerId = answer.id || `faq-answer-${index + 1}`;answer.id = answerId;question.setAttribute('aria-controls',answerId);const isInitiallyActive = item.classList.contains('active');answer.hidden = !isInitiallyActive;question.addEventListener('click',()=>{const isActive = item.classList.toggle('active');question.setAttribute('aria-expanded',isActive ? 'true':'false');answer.hidden = !isActive;if(toggle)toggle.textContent = isActive ? 'â€“':'+';});});const navLinks = document.querySelectorAll('.nav-links a[href^="#"]');navLinks.forEach((link)=>{link.addEventListener('click',(e)=>{const target = document.querySelector(link.getAttribute('href'));if(target){e.preventDefault();target.scrollIntoView({behavior:'smooth'});}});});function toggleCookieBanner(show){const banner = document.getElementById('cookie-banner');if(!banner)return;if(show){banner.classList.add('show');}else{banner.classList.remove('show');}}const consent = localStorage.getItem('mit-consent');if(!consent){setTimeout(()=> toggleCookieBanner(true),900);}document.getElementById('accept-cookies')?.addEventListener('click',()=>{localStorage.setItem('mit-consent','accepted');toggleCookieBanner(false);});document.getElementById('reject-cookies')?.addEventListener('click',()=>{localStorage.setItem('mit-consent','rejected');toggleCookieBanner(false);});const calculatorForm = document.getElementById('tax-calculator');const resultsContainer = document.getElementById('results');calculatorForm?.addEventListener('submit',(e)=>{e.preventDefault();if(!resultsContainer)return;const income = Number(calculatorForm.income.value)|| 0;const cutoff = Number(calculatorForm.cutoff.value)|| 0;const credits = Number(calculatorForm.credits.value)|| 0;const includeUSC = calculatorForm.usc.value === 'yes';const includePRSI = calculatorForm.prsi.value === 'yes';const result = calculateTaxResult({income,cutoff,credits,includeUSC,includePRSI});const snapshot = buildExportSummary(result,2025);resultsContainer.innerHTML = ` <div class="card"> <h3>Summary</h3> <p><strong>Estimated net pay:</strong> ${formatEuro(result.net)}</p> <p><strong>Total deductions:</strong> ${formatEuro(result.totalDeductions)}</p> </div> <div class="card"> <h3>Breakdown</h3> <ul class="features"> <li>PAYE(est.):${formatEuro(result.paye)}</li> <li>USC(est.):${formatEuro(result.usc)}</li> <li>PRSI(est.):${formatEuro(result.prsi)}</li> </ul> <p class="meta">Approximation based on common bands. Actual liability depends on Revenue rules,thresholds,and your circumstances.</p> </div> <pre class="meta">PDF/export snapshot:\n${JSON.stringify(snapshot,null,2)}</pre> `;});